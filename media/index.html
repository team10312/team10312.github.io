<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Media — Byte Force Robotics · Team 10312</title>
  <meta name="description" content="Media — Byte Force Robotics · Team 10312" />
  <style>
    /* ===== COLOR SYSTEM & THEME ===== */
    :root {
      --bg:#ffffff; --bg-soft:rgba(255,255,255,.55); --panel:rgba(255,255,255,.28); --panel-border:rgba(0,0,0,.08);
      --text:#0b0d12; --muted:#475062; --accent:#000; --brand:#ff7f00; --brand-2:#ffae42;
      --rg1:rgba(255,127,0,.20); --rg2:rgba(255,174,66,.14);
      --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.18); --ring:0 0 0 3px rgba(255,140,0,.35);
    }
    [data-theme="dark"] {
      --bg:#0a0b0f; --bg-soft:rgba(10,11,15,.55); --panel:rgba(255,255,255,.06); --panel-border:rgba(255,255,255,.08);
      --text:#eef2f7; --muted:#a9b3c4; --accent:#fff;
      --rg1:rgba(255,127,0,.25); --rg2:rgba(255,174,66,.20);
      --shadow:0 10px 30px rgba(0,0,0,.55);
    }
    *{box-sizing:border-box} html,body{height:100%}
    html{background:var(--bg); transition: background-color .25s ease;}
    body{
      margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text); position:relative; background:transparent; transition: color .25s ease;
    }
    a{color:inherit; text-decoration:none} img{max-width:100%; display:block}
    .container{width:min(1150px,92vw); margin:0 auto}
    .liquid-bg{position:fixed; inset:0; z-index:0; pointer-events:none;
      background:
        radial-gradient(1200px 600px at 70% -20%, var(--rg1), transparent 60%),
        radial-gradient(900px 500px at -10% 10%, var(--rg2), transparent 60%);
    }
    body > *:not(.liquid-bg){ position:relative; z-index:1; }

    /* Header */
    header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(8px);
      background:var(--bg-soft); border-bottom:1px solid var(--panel-border); isolation:isolate;}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:.8rem 0}
    .nav-left{display:flex; align-items:center; gap:1rem}
    .logo{display:inline-flex; align-items:center; gap:.6rem; font-weight:900; letter-spacing:.2px}
    .logo img{height:40px; width:auto}
    .nav-links{display:none; gap:1.2rem; color:var(--muted)}
    .nav-cta{display:none; gap:.6rem; align-items:center}
    @media (min-width:900px){ .nav-links, .nav-cta{display:flex} }
    .nav-links a.active{ color:var(--brand); font-weight:700; }
    .toggle-theme{ background:transparent; border:1px solid var(--panel-border); color:var(--text);
      border-radius:999px; padding:.45rem .9rem; font-weight:700; cursor:pointer;}

    /* Buttons */
    .btn, .glass-button{
      position:relative; display:inline-flex; align-items:center; justify-content:center; gap:.55rem;
      padding:.9rem 1.1rem; border-radius:calc(var(--radius) - 4px);
      color:#fff; font-weight:700; border:none; cursor:pointer; box-shadow:var(--shadow);
      background:linear-gradient(135deg, var(--brand), var(--brand-2));
      overflow:hidden; isolation:isolate; transition: transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover, .glass-button:hover{ transform: translateY(-1px); box-shadow: 0 14px 40px rgba(255,127,0,.35); }
    .btn.secondary{ background:transparent; border:1px solid var(--panel-border); color:var(--text); box-shadow:none; }
    .glass-button::before, .btn::before{
      content:""; position:absolute; inset:-40% -40% auto auto; width:180%; height:180%;
      background: radial-gradient(circle at var(--mx, 50%) var(--my, 50%), rgba(255,127,0,.55), transparent 65%);
      mix-blend-mode:screen; pointer-events:none; transition: opacity .12s ease; opacity:0;
    }
    .glass-button:hover::before, .btn:hover::before{ opacity:.8; }

    /* Sections */
    .hero{ padding: 4.8rem 0 1.6rem; }
    .headline{ font-size: clamp(2rem, 4.8vw, 3.4rem); line-height: 1.05; margin:0 0 .6rem; color:var(--brand); }
    .muted{ color: var(--muted); }
    .section{ padding: 2.8rem 0; }
    .h2{ font-size: clamp(1.6rem, 3.4vw, 2.2rem); margin:.3rem 0 1rem; color: var(--accent); }
    .card{ background: var(--panel); border:1px solid var(--panel-border); border-radius: var(--radius); box-shadow: var(--shadow); padding:1.1rem; }

    /* Media blocks */
    .video{aspect-ratio:16/9; border-radius:12px; overflow:hidden; background:#000}
    .gallery{display:grid; gap:.6rem; grid-template-columns: repeat(6,1fr)}
    @media (max-width:1000px){.gallery{grid-template-columns:repeat(4,1fr)}} 
    @media (max-width:640px){.gallery{grid-template-columns:repeat(2,1fr)}}
    .thumb{ aspect-ratio:1; border-radius:10px; overflow:hidden; cursor:pointer;
      background: linear-gradient(135deg, rgba(255,255,255,.3), rgba(255,255,255,.15));
      position:relative;
    }
    .thumb img{ width:100%; height:100%; object-fit:cover; border-radius:10px; display:block; }

    /* Video tiles show play badge (images never get one) */
    .thumb.is-video .play-badge{
      position:absolute; inset:0; display:grid; place-items:center;
      font-size:38px; color:#fff; text-shadow:0 2px 10px rgba(0,0,0,.55);
      pointer-events:none;
    }

    /* Footer */
    footer{ margin-top:2rem; padding:2rem 0 3rem; color:var(--muted); border-top:1px solid var(--panel-border); }
    .foot-grid{ display:grid; grid-template-columns: 1.4fr repeat(3, 1fr); gap:1rem; }
    @media (max-width:900px){ .foot-grid{ grid-template-columns: 1fr 1fr; } }
    @media (max-width:600px){ .foot-grid{ grid-template-columns: 1fr; } }

    /* ===== Lightbox (images + mp4/webm + YouTube/Vimeo) ===== */
    #lightbox-overlay{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.6);
      z-index: 2147483645;
      padding: 4vw;
    }
    #lightbox-overlay.show{ display: flex; }
    #lightbox-close{
      position: absolute;
      top: 16px;
      right: 20px;
      background: rgba(0,0,0,0.45);
      color: #fff;
      border: 0;
      font-size: 32px;
      line-height: 1;
      width: 44px;
      height: 44px;
      border-radius: 8px;
      cursor: pointer;
    }
    #lightbox-image,
    #lightbox-video,
    #lightbox-embed{
      display: none; /* toggled per media type */
      max-width: 100%;
      max-height: 100%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
      border-radius: 12px;
      background:#000;
    }
    #lightbox-embed{ border:0; aspect-ratio:16/9; width:min(90vw,1100px); height:auto; }
  </style>
</head>
<body>
  <div class="liquid-bg" aria-hidden="true"></div>

  <header>
    <div class="container nav">
      <div class="nav-left">
        <a class="logo" data-link="home" href="/"><img src="blacklogo.png" alt="Team 10312 Logo"><span></span></a>
        <nav class="nav-links">
          <a data-link="about" href="/about/">About</a>
          <a data-link="team" href="/team/">Team</a>
          <a data-link="robots" href="/robots/">Robots</a>
          <a data-link="sponsors" href="/sponsors/">Sponsors</a>
          <a data-link="media" href="/media/">Media</a>
          <a data-link="contact" href="/contact/">Contact</a>
        </nav>
      </div>
      <div class="nav-cta">
        <button class="toggle-theme" id="themeToggle" aria-label="Toggle theme">Dark</button>
        <a id="link-get-involved" class="btn glass-button" data-link="sponsors" href="/sponsors/#become-a-sponsor">Get Involved</a>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h1 class="headline">Media</h1>
      <p class="muted">Robot reveals, match footage, and behind-the-scenes.</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="h2">Robot Reveal</h2>
      <div class="card video">
        <iframe width="100%" height="100%" src="https://www.thebluealliance.com/team/10312" title="Robot Reveal" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h2 class="h2">Photo & Video Gallery</h2>

      <div class="gallery" id="mediaGallery">
        <!-- Put image OR video OR YouTube/Vimeo in ANY slot; script detects. -->
        <a href="media1.jpg"  class="thumb"><img src="media1.jpg"  alt="Media 1"></a>
        <a href="media2.jpg"  class="thumb"><img src="media2.jpg"  alt="Media 2"></a>
        <a href="media3.mp4"  class="thumb" aria-label="Media 3 video"></a>
        <a href="media4.jpg"  class="thumb"><img src="media4.jpg"  alt="Media 4"></a>
        <a href="media5.webm" class="thumb" aria-label="Media 5 video"></a>
        <a href="media6.jpg"  class="thumb"><img src="media6.jpg"  alt="Media 6"></a>
        <a href="media7.mp4"  class="thumb" aria-label="Media 7 video"></a>
        <a href="media8.jpg"  class="thumb"><img src="media8.jpg"  alt="Media 8"></a>
        <a href="media9.mp4"  class="thumb" aria-label="Media 9 video"></a>
        <a href="media10.jpg" class="thumb"><img src="media10.jpg" alt="Media 10"></a>
        <a href="media11.ogg" class="thumb" aria-label="Media 11 video"></a>
        <a href="media12.jpg" class="thumb"><img src="media12.jpg" alt="Media 12"></a>
      </div>
    </div>
  </section>

  <footer>
    <div class="container foot-grid">
      <div>
        <div class="logo"><img src="blacklogo.png" alt="Team 10312 Logo" style="height:28px"><strong>Byte Force</strong></div>
        <p class="muted" style="margin-top:.6rem;max-width:46ch">Orange • White • Black.</p>
      </div>
      <div>
        <h4>Explore</h4>
        <a class="muted" data-link="team" href="/team/">Team</a><br>
        <a class="muted" data-link="robots" href="/robots/">Robots</a><br>
        <a class="muted" data-link="media" href="/media/">Media</a>
      </div>
      <div>
        <h4>Support</h4>
        <a class="muted" data-link="sponsors" href="/sponsors/">Sponsors</a><br>
        <a class="muted" data-link="contact" href="/contact/">Contact</a>
      </div>
      <div>
        <h4>Follow</h4>
        <a class="muted" href="#">YouTube</a><br>
        <a class="muted" href="#">Instagram</a>
      </div>
    </div>
    <div class="container" style="margin-top:1.4rem;display:flex;justify-content:space-between;gap:.8rem;flex-wrap:wrap">
      <span class="muted">© <span id="year"></span> Byte Force Robotics — Team 10312</span>
      <div style="display:flex;gap:1rem"><a class="muted" href="#">Privacy</a><a class="muted" href="#">Terms</a></div>
    </div>
  </footer>

  <script>
    // ----- CONFIG: Set these to your WordPress page slugs/URLs -----
    const LINKS = { home: '/', about: '/about/', team: '/team/', robots: '/robots/', sponsors: '/sponsors/', media: '/media/', contact: '/contact/' };
    const PAGE = 'media';

    document.addEventListener('DOMContentLoaded', () => {
      const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();
      setActive();
      setupLightbox();
      classifyAndDecorateTiles();
      generateVideoThumbnails(); // only runs on actual videos w/o posters
    });

    function setActive() {
      document.querySelectorAll(\`.nav-links a[data-link="\${PAGE}"]\`).forEach(a=>a.classList.add('active'));
    }
  </script>

  <!-- Lightbox + Gallery logic -->
  <script>
  // ---- Type detection helpers
  const IMG_EXT = /\.(jpe?g|png|gif|webp|avif)(\?.*)?$/i;
  const VID_EXT = /\.(mp4|webm|ogv|ogg)(\?.*)?$/i;

  function youtubeId(u){
    try{
      const url = new URL(u, window.location.href);
      if (/youtu\.be$/i.test(url.hostname)) return url.pathname.replace('/','');
      if (/youtube\.com$/i.test(url.hostname)) return url.searchParams.get('v') || url.pathname.split('/').pop();
    }catch(e){}
    return null;
  }
  function vimeoId(u){
    try{
      const url = new URL(u, window.location.href);
      if (/vimeo\.com$/i.test(url.hostname)) return url.pathname.split('/').filter(Boolean).pop();
    }catch(e){}
    return null;
  }
  function toEmbed(u){
    const y = youtubeId(u);
    if (y) return \`https://www.youtube.com/embed/\${y}?autoplay=1&rel=0\`;
    const v = vimeoId(u);
    if (v) return \`https://player.vimeo.com/video/\${v}?autoplay=1\`;
    return null;
  }

  // ---- Lightbox
  let overlay, imgEl, vidEl, ifrEl;
  function setupLightbox(){
    overlay = document.createElement('div');
    overlay.id = 'lightbox-overlay';
    overlay.innerHTML = \`
      <button id="lightbox-close" aria-label="Close">×</button>
      <img id="lightbox-image" alt="">
      <video id="lightbox-video" playsinline controls></video>
      <iframe id="lightbox-embed" allow="autoplay; fullscreen"></iframe>
    \`;
    document.body.appendChild(overlay);
    imgEl = overlay.querySelector('#lightbox-image');
    vidEl = overlay.querySelector('#lightbox-video');
    ifrEl = overlay.querySelector('#lightbox-embed');

    overlay.addEventListener('click', (e)=>{
      if (e.target === overlay || e.target.id === 'lightbox-close') closeLightbox();
    });
    document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeLightbox(); });
  }
  function hideAll(){
    imgEl.style.display = 'none';
    vidEl.style.display = 'none';
    ifrEl.style.display = 'none';
    try{ vidEl.pause(); }catch(e){}
    vidEl.removeAttribute('src');
    ifrEl.removeAttribute('src');
    imgEl.removeAttribute('src');
  }
  function openLightbox(kind, src, alt){
    hideAll();
    if (kind === 'image'){
      imgEl.src = src; imgEl.alt = alt || '';
      imgEl.style.display = 'block';
    } else if (kind === 'video'){
      vidEl.src = src;
      vidEl.style.display = 'block';
      setTimeout(()=>{ try{ vidEl.play(); }catch(e){} }, 0);
    } else if (kind === 'embed'){
      ifrEl.src = src;
      ifrEl.style.display = 'block';
    }
    overlay.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
  function closeLightbox(){
    overlay.classList.remove('show');
    document.body.style.overflow = '';
    hideAll();
  }

  // ---- Classification & decoration (runs once)
  function classifyAndDecorateTiles(){
    const gallery = document.getElementById('mediaGallery');
    const tiles = Array.from(gallery.querySelectorAll('a.thumb'));

    tiles.forEach((a)=>{
      const href = a.getAttribute('href') || '';
      const isImg  = IMG_EXT.test(href);
      const isVid  = VID_EXT.test(href);
      const embed  = toEmbed(href);

      // reset state & ensure no duplicate badges
      a.classList.remove('is-video');
      a.removeAttribute('data-kind');
      const oldBadge = a.querySelector('.play-badge'); if (oldBadge) oldBadge.remove();

      if (embed){
        a.dataset.kind = 'embed';
        a.classList.add('is-video');
        ensurePosterForEmbed(a, href);
        addPlayBadge(a);
      } else if (isVid){
        a.dataset.kind = 'video';
        a.classList.add('is-video');
        // if author supplied poster <img> or data-poster, use it; else auto-generate later
        if (!a.querySelector('img')){
          const poster = a.getAttribute('data-poster');
          if (poster){
            const img = new Image();
            img.src = poster; img.alt = a.getAttribute('aria-label') || 'Video';
            img.loading = 'lazy';
            a.appendChild(img);
          }
        }
        addPlayBadge(a);
      } else if (isImg){
        a.dataset.kind = 'image';
        if (!a.querySelector('img')){
          const img = new Image();
          img.src = href; img.alt = a.getAttribute('aria-label') || 'Image';
          img.loading = 'lazy';
          a.appendChild(img);
        }
      } else {
        // Unknown: treat as image fallback (won't break layout)
        a.dataset.kind = 'image';
      }
    });

    // Single click handler for all 12 slots
    gallery.addEventListener('click', (e)=>{
      const a = e.target.closest('a.thumb');
      if (!a) return;
      const kind = a.dataset.kind;
      if (!kind) return;

      e.preventDefault();
      if (kind === 'image'){
        const img = a.querySelector('img');
        openLightbox('image', a.href, img ? img.alt : '');
      } else if (kind === 'video'){
        openLightbox('video', a.href, a.getAttribute('aria-label') || '');
      } else if (kind === 'embed'){
        openLightbox('embed', toEmbed(a.href), a.getAttribute('aria-label') || '');
      }
    });
  }

  function addPlayBadge(a){
    if (!a.querySelector('.play-badge')){
      const pb = document.createElement('span');
      pb.className = 'play-badge';
      pb.textContent = '▶';
      a.appendChild(pb);
    }
  }

  function ensurePosterForEmbed(a, href){
    // Lightweight: YouTube thumbnails only (public), Vimeo needs API → skip auto.
    const id = youtubeId(href);
    if (id && !a.querySelector('img')){
      const img = new Image();
      img.src = `https://img.youtube.com/vi/${id}/hqdefault.jpg`;
      img.alt = a.getAttribute('aria-label') || 'Video';
      img.loading = 'lazy';
      a.appendChild(img);
    }
  }

  // ---- Video thumbnail generation (first frame), safe with timeout & CORS fallback
  function generateVideoThumbnails(){
    const tiles = Array.from(document.querySelectorAll('a.thumb[data-kind="video"]'));
    tiles.forEach((a)=>{
      // Already has poster? (author-supplied or previous run)
      if (a.querySelector('img')) return;

      const src  = a.getAttribute('href');
      const time = parseFloat(a.getAttribute('data-thumbtime') || '0.15'); // avoid black frame

      const vid  = document.createElement('video');
      const cv   = document.createElement('canvas');
      const ctx  = cv.getContext('2d');

      // Same-origin or CORS-enabled files only; otherwise canvas is tainted → we gracefully skip.
      vid.crossOrigin = 'anonymous';
      vid.preload = 'auto';
      vid.playsInline = true;
      vid.muted = true;
      vid.src = src;

      let done = false;
      const cleanup = ()=>{
        if (done) return;
        done = true;
        try { vid.pause(); } catch(e){}
        vid.removeAttribute('src'); vid.load(); vid.remove();
      };
      const fallback = ()=>{
        // Leave tile as-is with gradient + play badge (no black boxes)
        cleanup();
      };

      const timeoutId = setTimeout(fallback, 2000); // 2s safety

      vid.addEventListener('loadedmetadata', ()=>{
        try { const p = vid.play(); (p && p.catch ? p.catch(()=>{}) : null); vid.pause(); } catch(e){}
        try { vid.currentTime = Math.max(0, time); } catch(e){}
      });

      function capture(){
        if (!vid.videoWidth || !vid.videoHeight) return fallback();
        cv.width  = vid.videoWidth;
        cv.height = vid.videoHeight;
        ctx.drawImage(vid, 0, 0, cv.width, cv.height);
        const url = cv.toDataURL('image/jpeg', 0.85);
        const img = new Image();
        img.alt = a.getAttribute('aria-label') || 'Video';
        img.loading = 'lazy';
        img.src = url;
        a.insertBefore(img, a.firstChild);
        clearTimeout(timeoutId);
        cleanup();
      }

      vid.addEventListener('seeked', capture);
      vid.addEventListener('loadeddata', ()=>{
        // Some browsers fire loadeddata with frame 0 already available
        if (!done && (vid.currentTime === 0 || !isFinite(vid.currentTime))) capture();
      });
      vid.addEventListener('error', ()=>{
        clearTimeout(timeoutId);
        fallback();
      });
    });
  }
  </script>

  <!-- Liquid Glass Header enhancer -->
  <script>
  (function(){
    function enhanceHeader(){
      const candidates = document.querySelectorAll('header, .header, .topbar, .top-bar, .navbar, nav[role="navigation"]');
      if(candidates.length){
        const el = candidates[0];
        if(!el.classList.contains('liquid-glass-header')) el.classList.add('liquid-glass-header');
      }
      const headerEl = document.querySelector('.liquid-glass-header');
      if(headerEl){
        const onScroll = ()=>{
          const y = (window.scrollY || document.documentElement.scrollTop || 0);
          if(y > 8) headerEl.classList.add('scrolled'); else headerEl.classList.remove('scrolled');
        };
        onScroll();
        window.addEventListener('scroll', onScroll, {passive:true});
      }
    }
    if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', enhanceHeader);
    else enhanceHeader();
  })();
  </script>

  <!-- Logo swap script -->
  <script>
  (function() {
    function forEachLogo(fn){
      const imgs = document.querySelectorAll('img[src$="blacklogo.png"], img[src$="whitelogo.png"]');
      (imgs.forEach ? imgs.forEach(fn) : Array.prototype.forEach.call(imgs, fn));
    }
    function isDarkMode() {
      const html = document.documentElement;
      const dt = (html.getAttribute('data-theme') || '').toLowerCase();
      if (dt === 'dark') return true;
      if (dt === 'light') return false;
      if (html.classList.contains('dark') || html.classList.contains('theme-dark')) return true;
      if (html.classList.contains('light') || html.classList.contains('theme-light')) return false;
      if (window.matchMedia) return window.matchMedia('(prefers-color-scheme: dark)').matches;
      return false;
    }
    function setLogoByTheme() {
      const dark = isDarkMode();
      forEachLogo((img)=>{
        const current = img.getAttribute('src') || '';
        const desired = current.replace(/(white|black)logo\.png$/i, dark ? 'whitelogo.png' : 'blacklogo.png');
        if (desired !== current) img.setAttribute('src', desired);
      });
    }
    setLogoByTheme();
    try {
      const obs = new MutationObserver(setLogoByTheme);
      obs.observe(document.documentElement, {attributes: true, attributeFilter: ['class','data-theme']});
      if (window.matchMedia) window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', setLogoByTheme);
      window.addEventListener('storage', setLogoByTheme);
    } catch (e) {}
  })();
  </script>

  <!-- Minimal CSS for the sticky glass header state -->
  <style>
    .liquid-glass-header{
      position: sticky;
      top: 0;
      z-index: 9999;
      background: rgba(255,255,255,0.55);
      -webkit-backdrop-filter: blur(12px) saturate(160%);
      backdrop-filter: blur(12px) saturate(160%);
      border-bottom: 1px solid rgba(0,0,0,0.08);
      transition: background-color .3s ease, border-color .3s ease, box-shadow .3s ease;
    }
    .liquid-glass-header.scrolled{
      background: rgba(255,255,255,0.72);
      box-shadow: 0 2px 20px rgba(0,0,0,0.12);
    }
    :root[data-theme="dark"] .liquid-glass-header{
      background: rgba(17,25,40,0.45);
      border-color: rgba(255,255,255,0.08);
    }
    :root[data-theme="dark"] .liquid-glass-header.scrolled{
      background: rgba(17,25,40,0.62);
    }
  </style>
</body>
</html>
